
{% extends 'base.html' %}
{% block content %}
<div class='titulo-y-boton'>
    <div class="titulos">
        <h1>Espacio de Trabajo: {{ espacio.nombre }} </h1>
        <h2>Tablero: {{ tablero.nombre }}</h2>
    </div> 
    <div class="boton-crear">
        <a href="{% url 'crear_lista' espacio_id=espacio.id tablero_id=tablero.id %}">Crear lista</a>
    </div>
</div>
<div class="kanban-board">
    {% for lista in listas %}
    <div class="column {% if lista.lleno %}column-full{% endif %}"> 
        {% if lista.lleno %}
            <div class="alert alert-danger">¡La lista ha alcanzado su límite de WIP!</div>
        {% endif %}
        <div class="boton-crear"><a  href="{% url 'lista_mover_izquierda' espacio_id=espacio.id tablero_id=tablero.id lista_id=lista.id %}">Izquierda</a></div>
        <div class="boton-crear"><a href="{% url 'lista_detalle' espacio_id=espacio.id tablero_id=tablero.id lista_id=lista.id %}">Editar Lista</a></div>
        <div class="boton-crear"><a href="{% url 'lista_mover_derecha' espacio_id=espacio.id tablero_id=tablero.id lista_id=lista.id %}">Derecha</a></div>

        <h2>{{ lista.nombre }} (WIP: {{ lista.max_wip }})</h2>
        <div class="cards">
            {% for tarjeta in lista.tarjetas.all %}
            <div class="card">
                <div class="card-header">
                    {{ tarjeta.nombre_actividad }}
                </div>
                <div class="card-body">
                    <p>{{ tarjeta.descripcion }}</p>
                    </div>
                <div class="card-footer">
                    <div class="boton-crear">
                        <a href="{% url 'tarjeta_detalle' espacio_id=espacio.id tablero_id=tablero.id lista_id=lista.id tarjeta_id=tarjeta.id %}">Editar</a>
                    </div>
                </div>
            </div>
            {% endfor %}
            <div class="boton-crear"><a href="{% url 'crear_tarjeta' espacio_id=espacio.id tablero_id=tablero.id lista_id=lista.id %}">Agregar tarjeta</a></div>
            
        </div> 
    </div>
    {% endfor %}
</div>
{% endblock %}